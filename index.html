<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta property="og:title" content="Komunitas flight simulator">
<meta property="og:description" content="Bergabunglah bersama kami. Proses cepat, mudah, dan aman.">
<meta property="og:image" content="link-foto-logo-anda.jpg">
<meta property="og:type" content="website">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<title>Loading...</title>
<script src="https://www.google.com/recaptcha/api.js" async defer></script>
<style>
    html {
  scroll-behavior: smooth;
}
body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(#0a1a2f, #000);
    color: white;
    margin: 0;
    
}
.container {
    max-width: 900px;
    margin: auto;
    padding: 20px;
}
h1, h3, h2 {
    text-align: center;
}
/* Warna Tema Terang */
body.light-theme {
    background: linear-gradient(#f0f2f5, #ffffff);
    color: #1a1a1a;
}

body.light-theme .card, 
body.light-theme .header-bar,
body.light-theme .nav-menu {
    background: #ffffff;
    color: #1a1a1a;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    border: 1px solid #ddd;
}

body.light-theme input, 
body.light-theme textarea {
    background: #f9f9f9;
    color: #333;
    border: 1px solid #ccc;
}

body.light-theme .preview {
    background: #eef2f7;
    color: #333;
}

body.light-theme .hamburger svg {
    fill: #1a1a1a;
}

body.light-theme .nav-menu a {
    color: #1a1a1a;
    border-bottom: 1px solid rgba(0,0,0,0.1);
}

body.light-theme .preview pre, 
body.light-theme .preview label,
body.light-theme .preview b {
    color: #1a1a1a !important;
}

body.light-theme .preview div {
    background: rgba(0, 0, 0, 0.05) !important;
    border-color: #ccc !important;
}

body.light-theme .nav-menu a:hover {
    background: #e0e0e0;
}

.card {
    background: #111;
    border-radius: 12px;
    padding: 20px;
    margin-top: 25px;
    box-shadow: 0 0 15px rgba(0,150,255,0.3);
}
.btn {
    width: 100%;
    background: #1e90ff;
    padding: 12px;
    color: white;
    border-radius: 8px;
    margin-top: 20px;
    font-weight: bold;
    cursor: pointer;
    border: none;
}
input, textarea {
    width: 95%;
    padding: 10px;
    margin-top: 8px;
    border-radius: 6px;
    border: none;
    font-size: 14px;
}
textarea {
    min-height: 80px;
}
label {
    margin-top: 15px;
    display: block;
}
.preview {
    background: #0b1a33;
    padding: 15px;
    border-radius: 8px;
    margin-top: 20px;
    font-size: 13px;
    white-space: pre-line;
}
.footer {
    text-align: center;
    margin-top: 40px;
    font-size: 12px;
    opacity: 0.6;
}
ul {
    padding-left: 18px;
}
.slider {
  position: relative;
  max-width: 100%;
  overflow: hidden;
  border-radius: 12px;
  margin-top: 15px;
}

.slides {
  display: flex;
  transition: transform 0.5s ease;
}

.slides img {
  width: 100%;
  flex-shrink: 0;
}

.prev, .next {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(30,144,255,0.8);
  color: white;
  border: none;
  padding: 10px;
  cursor: pointer;
  border-radius: 50%;
}

.prev { left: 10px; }
.next { right: 10px; }

.prev:hover, .next:hover { background: #1e90ff; }
.qr {
  text-align: center;
  margin-top: 15px;
}
.qr img {
  width: 200px;
  height: 200px;
  border-radius: 12px;
  box-shadow: 0 0 15px rgba(0,150,255,0.4);
}
.header-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #111;
  padding: 10px 20px;
  border-radius: 12px;
  box-shadow: 0 0 15px rgba(0,150,255,0.3);
  position: sticky;
  top: 0;
  z-index: 999;
}


.header-bar h2 {
  margin: 0;
  font-size: 18px;
}

.hamburger {
  background: none;
  border: none;
  cursor: pointer;
}
.nav-menu {
  display: none; /* hidden default */
  flex-direction: column;
  background: #0a1a2f;
  position: absolute;
  top: 60px;
  right: 20px;
  border-radius: 12px;
  padding: 10px;
  box-shadow: 0 0 15px rgba(0,150,255,0.4);
  z-index: 999;
}

.nav-menu a {
  color: white;
  text-decoration: none;
  padding: 10px;
  display: block;
  border-bottom: 1px solid rgba(255,255,255,0.1);
}

.nav-menu a:last-child {
  border-bottom: none;
}

.nav-menu a:hover {
  background: #1e90ff;
  border-radius: 8px;
}
#main-content, #step-preview {
    animation: fadeIn 0.4s ease-in-out;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(5px); }
    to { opacity: 1; transform: translateY(0); }
}
.captcha-container {
    display: flex;
    justify-content: center;
    margin: 20px 0;
}
#aturan {
    font-size: 12px;
    line-height: 1.5;
}

#aturan h3 {
    font-size: 14px;
    margin-bottom: 6px;
}

#aturan p {
    margin: 6px 0;
}

#aturan ul {
    padding-left: 18px;
    margin: 6px 0;
}

#aturan li {
    margin-bottom: 4px;
    color: #959595;
}

#aturan hr {
    border: none;
    border-top: 1px dashed #ccc;
    margin: 10px 0;
}
.loader {
    border: 4px solid rgba(255, 255, 255, 0.1);
    border-left: 4px solid #1e90ff;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
}
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
.hidden { display: none !important; }
.fade-in { animation: fadeIn 0.5s ease-in-out; }
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

body.light-theme #loading-screen {
    background: #f0f2f5 !important;
}
body.light-theme #loading-screen p, 
body.light-theme #loading-screen .footer {
    color: #1a1a1a !important;
    opacity: 1;
}
body.light-theme .footer {
    color: #000 !important;
    opacity: 0.7;
}
#loading-screen {
    touch-action: none; /* Mencegah skrol di HP */
    overscroll-behavior: contain;
}
body.light-theme #offline-screen {
    background: #ffffff !important;
}
body.light-theme #offline-screen h2, 
body.light-theme #offline-screen p {
    color: #1a1a1a !important;
}
/* Container Utama Offline Screen */
#offline-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #0a1a2f; /* Warna gelap default */
    z-index: 10001;
    display: none; /* Diatur lewat JavaScript */
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 20px;
    box-sizing: border-box;
    
    /* Efek Transisi Memudar */
    transition: opacity 0.5s ease, visibility 0.5s;
    opacity: 1;
    visibility: visible;
}

/* Konten di dalam Offline Screen */
#offline-screen .icon {
    font-size: 60px;
    margin-bottom: 20px;
}

#offline-screen h2 {
    color: white;
    margin: 0;
    font-size: 24px;
    font-family: Arial, sans-serif;
}

#offline-screen p {
    color: #ccc;
    margin: 15px 0 25px 0;
    max-width: 320px;
    line-height: 1.5;
    font-size: 14px;
}

/* Memastikan tombol berada di tengah */
#offline-screen .btn {
    width: auto !important;
    padding: 12px 40px;
    margin: 0;
    display: inline-block;
}

/* Footer khusus layar offline */
#offline-screen .footer {
    position: absolute;
    bottom: 30px;
    left: 0;
    width: 100%;
    margin: 0;
    opacity: 0.8;
    color: white;
}

/* --- LOGIKA TEMA TERANG --- */
body.light-theme #offline-screen {
    background: #ffffff !important;
}

body.light-theme #offline-screen h2 {
    color: #1a1a1a !important;
}

body.light-theme #offline-screen p {
    color: #555 !important;
}

body.light-theme #offline-screen .footer {
    color: #1a1a1a !important;
}

/* --- CLASS UNTUK EFEK FADE OUT (Saat Online Kembali) --- */
.hide-offline {
    opacity: 0 !important;
    visibility: hidden !important;
}
.group-name-bg {
    position: relative;

    /* FULL LEBAR LAYAR */
    width: 100vw;
    left: 50%;
    right: 50%;
    margin-left: -50vw;
    margin-right: -50vw;

    padding: 26px 20px 30px;

    background-image: url("bg-name.png");
    background-repeat: no-repeat;
    background-position: center;
    background-size: 100% 100%;

    box-sizing: border-box;
}

/* BLUR LAYER */
.group-name-bg::before {
    content: "";
    position: absolute;
    inset: 0;

    background-image: url("pesawat3.png");
    background-repeat: no-repeat;
    background-position: center;
    background-size: 100% 100%;
    height:250px;
    filter: blur(5px);
    opacity: 0.7;

    z-index: 0;
}

/* TEKS */
.group-name-bg h2 {
    position: relative;
    z-index: 1;

    margin: 0;
    text-align: center;

    font-size: 28px;
    font-weight: 600;
    letter-spacing: 1.2px;
}
</style>
</head>

<body><br>

<header>
 <div class="header-bar">
  <button class="btn" style="width: auto; margin: 0; padding: 5px 15px;" onclick="toggleTheme()">
    üåì Ganti Tema
  </button>
  <button class="hamburger" onclick="toggleMenu()">
    <svg width="30" height="30" viewBox="0 0 100 80" fill="white">
      <rect width="100" height="15"></rect>
      <rect y="30" width="100" height="15"></rect>
      <rect y="60" width="100" height="15"></rect>
    </svg>
  </button>

</header>
            <br><br>
 <div class="group-name-bg"><br><br>
    <h2 class="group-name"></h2>
            <p style="text-align:center;">Komunitas Flight Simulator Indonesia<br><b>Real Flight Simulator (RFS)</b></p></div>
<div class="container">
    <div id="main-content">
        <div id="hero-section" class="fade-in" style="text-align: center; padding: 40px 10px;">
            <div class="card">
                <div class="slider">
                    <div class="slides">
                        <img src="pesawat1.png" alt="Pesawat 1">
                        <img src="1.png" alt="Pesawat 2">
                        <img src="pesawat2.png" alt="Pesawat 3">
                        <img src="2.png" alt="Pesawat 4">
                        <img src="pesawat3.png" alt="pesawat 5">
                    </div>
                    <button class="prev" onclick="plusSlides(-1)">‚ùÆ</button>
                    <button class="next" onclick="plusSlides(1)">‚ùØ</button>
                </div><br>
            </div>

            <div class="card" id="form">
                <p>Selamat datang! Belum mendaftar? Ayo daftar sekarang juga!</p>
                <button class="btn" onclick="bukaForm()" style="font-size: 18px; padding: 15px;">DAFTAR SEKARANG</button>
            </div>

        </div>
</div>
  <nav id="navMenu" class="nav-menu">
    <a href="#keterangan">Keterangan</a>
    <a href="#aturan">Aturan</a>
    <a href="#form">Form Pendaftaran</a>
  </nav>
   <div class="card" id="keterangan">
    <h3>üìå Mengenal <span class="group-name"></span></h3>
    <p style="text-align: center; opacity: 0.9; line-height: 1.6;">
        Komunitas bagi para pecinta Flight Simulator, khususnya <b>Real Flight Simulator (RFS)</b> di Indonesia üáÆüá©
    </p>

    <div style="display: grid; grid-template-columns: 1fr; gap: 15px; margin-top: 20px;">
        <div style="background: rgba(30,144,255,0.1); padding: 15px; border-radius: 8px; border-left: 4px solid #1e90ff;">
            <b style="color: #1e90ff; display: block; margin-bottom: 8px;">‚úàÔ∏è Wadah Komunitas:</b>
            <ul style="margin: 0; padding-left: 20px; font-size: 14px; line-height: 1.6;">
                <li>Diskusi seputar fitur & update RFS</li>
                <li>Sharing rute, teknik landing, & pengalaman</li>
                <li>Berbagi tips, trik, dan pengaturan pesawat</li>
                <li>Belajar bersama dari pemula hingga pro</li>
            </ul>
        </div>

        <div style="background: rgba(255,107,107,0.1); padding: 15px; border-radius: 8px; border-left: 4px solid #ff6b6b;">
            <b style="color: #ff6b6b; display: block; margin-bottom: 8px;">ü§ù Komitmen Anggota:</b>
            <ul style="margin: 0; padding-left: 20px; font-size: 14px; line-height: 1.6;">
                <li>Gunakan bahasa yang sopan</li>
                <li>Saling menghargai antar sesama pilot virtual</li>
                <li>Dilarang spam, SARA, atau konten negatif</li>
                <li>Menjaga kenyamanan & kekompakan grup</li>
            </ul>
        </div>
        
    </div>
</div>
 <div class="card" id="aturan">
    <h3>ü™ñ‚úàÔ∏è PERATURAN GRUP ‚Äì STATUS SIAGA ‚úàÔ∏èü™ñ</h3>

    <p><b>SELURUH ANGGOTA WAJIB MEMATUHI PERATURAN GRUP</b></p>

    <ul>
        <li>üö´ Stiker jomok = <b>Pelanggaran berat</b></li>
        <li>üìµ Spam telepon &gt; 3x = <b>Tindakan admin</b></li>
        <li>üó£Ô∏è Tidak sopan terhadap admin / member = <b>Tidak ditoleransi</b></li>
        <li>‚ùå Video / tautan judi online & sejenisnya = <b>Blacklist permanen</b></li>
        <li>ü§ù Etika sesama member <b>wajib dijaga</b></li>
        <li>
            ‚ûï Undang anggota diperbolehkan<br>
            Akun spam / tidak aktif / meresahkan = <b>Dikeluarkan</b>
        </li>
    </ul>

    <hr>

    <ul>
        <li>‚ö†Ô∏è Admin bertugas menjaga ketertiban grup</li>
        <li>‚ö†Ô∏è Keputusan admin bersifat final</li>
        <li>‚ö†Ô∏è Pelanggaran ditindak sesuai tingkat kesalahan</li>
    </ul><br>

    <p style="font-size:11px; opacity:0.7;">
Aturan dibuat untuk menjaga kenyamanan bersama, bukan untuk membatasi diskusi sehat.
</p><br>
    <p>
        ‚úàÔ∏è <b>INI ADALAH GRUP PECINTA AVIATION</b><br>
        Disiplin adalah kehormatan<br>
        Saling menghormati adalah kekuatan
    </p><br>

    <p><b>üõ´ SALAM AVIATION üôèü™ñüî•</b></p>
    <p style="font-size:11px; opacity:0.6; margin-top:10px;">
Website ini bersifat komunitas dan tidak berafiliasi dengan pihak resmi pengembang Real Flight Simulator.
</p>
</div>
<div class="card" id="keterangan">
    <h3>üìå Keterangan Pendaftaran</h3>
    <ul>
    <li>Pendaftaran <b>tidak otomatis</b> masuk grup</li>
    <li>Data dikirim ke admin untuk verifikasi</li>
    <li>1 nomor WhatsApp hanya <b>1 kali daftar</b></li>
    <li>Jika salah isi, akan ada verifikasi ulang</li>
    </ul>
    </div>


        <div id="form-section" class="hidden fade-in">    
    <div class="card">
      <h3 id="form">‚úàÔ∏è Form Pendaftaran</h3>

      <h4>üìå Data Wajib</h4>

      <label>Nama <span style="color:#ff6b6b">*</span></label>
      <input id="nama" placeholder="Nama anda">

      <label>Nomor WhatsApp <span style="color:#ff6b6b">*</span></label>
      <input id="wa" type="number" placeholder="08xxxx / 628xxxx">

      <label>Umur <span style="color:#ff6b6b">*</span></label>
      <input id="umur" type="number" min="5" max="100" placeholder="5‚Äì100 tahun">
      <p style="font-size:11px; opacity:0.6;">
Pendaftar di bawah usia tertentu memerlukan pengawasan orang tua.
</p>
      <label>Alasan Masuk <span style="color:#ff6b6b">*</span></label>
      <textarea id="alasan" placeholder="Jelaskan alasan anda ingin bergabung"></textarea>

      <h4>üìù Data Opsional</h4>

      <label>Kelas</label>
      <input id="kelas" placeholder="Contoh: Pilot Pemula / Advance">

      <label>Akun Tiktok</label>
      <input id="tiktok" placeholder="@username">
      <div id="tiktokPreview" style="margin-top:10px;font-size:13px;"></div>

      <label>Jumlah Follower TikTok</label>
      <input id="follower" type="number" placeholder="Misal: 1500">

      <label>Provinsi</label>
      <input id="provinsi" placeholder="Misal: Jawa Barat">

      <label>Kota</label>
      <input id="kota" placeholder="Misal: Bandung">

      <label>Planet</label>
      <input id="planet" placeholder="Misal: Mars / Bumi">

      <label>Galaxy</label>
      <input id="galaxy" placeholder="Misal: Andromeda / Milky Way">
      <br><br>
     <div id="formError" style="color:#ff6b6b; margin-top:10px; font-weight:bold;"></div>
                <button class="btn" onclick="proses()">LANJUTKAN</button>
            </div> <button onclick="location.reload()" style="background:none; border:none; color:#1e90ff; cursor:pointer; font-weight:bold; margin-bottom:15px; padding:0; display:flex; align-items:center; gap:5px;">
        ‚¨Ö Kembali ke Beranda
      </button>
    </div>
  </div>

  <div id="step-preview" style="display: none;">
    <div class="card">
        <div id="preview"></div>
        <button class="btn" style="background: #555; margin-top: 15px;" onclick="kembaliKeForm()">Batal dan Kembali</button>
    </div>
  </div>

<div id="customModal" style="display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.8); align-items:center; justify-content:center;">
  <div class="card" style="max-width:400px; text-align:center; border: 2px solid #1e90ff;">
    <h3>‚ö†Ô∏è Perhatian</h3>
    <p id="modalText">anda sudah pernah mendaftar sebelumnya. Ingin coba lagi?</p>
    <div style="display:flex; gap:10px;">
      <button class="btn" onclick="tutupModal(true)">YA, LANJUTKAN</button>
      <button class="btn" style="background:#ff4d4d;" onclick="tutupModal(false)">BATAL</button>
    </div>
  </div>
</div>
<div id="loading-screen" style="position:fixed; top:0; left:0; width:100%; height:100%; background:#0a1a2f; display:flex; flex-direction:column; align-items:center; justify-content:center; z-index:9999; transition: opacity 0.5s ease;">
    <div class="loader"></div>
    <p id="loading-text" style="color:white; margin-top:20px; font-family:Arial; font-size:14px;">Memuat data...</p>
    <button id="retry-btn" onclick="location.reload()" style="display:none; margin-top:15px; background:#ff4d4d; color:white; border:none; padding:10px 20px; border-radius:8px; cursor:pointer;">Coba Lagi</button><br><br>
    <div class="footer">
 ¬© <span class="year-auto"></span> <span class="group-name"></span><br>
  ¬© <span class="year-auto"></span> Raka developer
</div>
</div>

<div class="footer" style="margin-top: 40px; text-align: center;">
    <hr style="border: 0; border-top: 1px solid #989898; margin: 30px auto 20px; width: 50%;">

    <div style="font-size: 12px; color: #4caf50; letter-spacing: 1px;">
        ‚óè OFFICIAL REGISTRATION SYSTEM
    </div>
    <div style="margin-top: 4px; font-size: 10px; opacity: 0.6;">
        Secure & Authorized Platform
    </div>

    <div style="margin-top: 12px; opacity: 0.75; font-size: 13px;">
        ¬© <span class="year-auto"></span> <span class="group-name"></span><br>
        Developed by <strong>Raka579</strong>
    </div>

    <div style="margin-top: 10px; font-size: 11px; opacity: 0.6; line-height: 1.6;">
        Sistem ini digunakan khusus untuk proses pendaftaran dan verifikasi anggota.<br>
        Data pendaftar bersifat privat dan tidak disebarluaskan.<br>
        Data yang tidak valid atau palsu dapat menyebabkan pendaftaran ditolak.
    </div>

    <div style="margin-top: 8px; font-size: 11px; opacity: 0.5;">
        Privacy Policy ‚Ä¢ Terms of Use
    </div>

    <div style="margin-top: 6px; font-size: 11px; opacity: 0.5;">
        System Version: v1.0.0 ‚Ä¢ Status: Online
    </div>

    <div style="margin-top: 6px; font-size: 11px; opacity: 0.6;">
        Last updated: <span id="lastUpdate"></span>
    </div>
</div>
<div id="offline-screen" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#0a1a2f; z-index:10001; flex-direction:column; align-items:center; justify-content:center; text-align:center; box-sizing:border-box; padding:20px;">
    
    <div class="icon" style="font-size: 60px; margin-bottom: 20px;">üö´</div>
    
    <h2 style="color:white; margin:0; font-family: Arial, sans-serif;">Koneksi Terputus</h2>
    
    <p style="color:#ccc; margin: 15px 0 25px 0; max-width: 300px; line-height: 1.5;">
        Silakan periksa koneksi internet Anda dan coba lagi
    </p>
    
    <button onclick="location.reload()" class="btn" style="width:auto; padding:12px 40px; margin:0;">
        Coba Lagi
    </button>

    <div class="footer" style="position: absolute; bottom: 30px; margin:0; opacity: 0.8;">
        ¬© <span class="year-auto"></span> Raka developer
    </div>
</div>

</div>



<script>
document.getElementById("lastUpdate").textContent =
    new Date().toLocaleString("id-ID");
document.body.style.overflow = "hidden";

function hideLoading() {
    const screen = document.getElementById("loading-screen");
    screen.style.opacity = "0";
    document.body.style.overflow = "auto";
    setTimeout(() => screen.style.display = "none", 500);
}

function showLoadingError() {
    document.getElementById("loading-text").innerHTML = "‚ùå Gagal memuat halaman, coba lagi nanti";
    document.getElementById("loading-text").style.color = "#ff6b6b";
    document.querySelector(".loader").style.display = "none";
    document.getElementById("retry-btn").style.display = "block";
}

Promise.all([
    fetch("group.json?ts=" + Date.now()).then(res => {
        if (!res.ok) throw new Error("Gagal load JSON");
        return res.json();
    }),
    new Promise((resolve) => {
        if (document.readyState === 'complete') {
            resolve();
        } else {
            window.addEventListener('load', resolve);
        }
    })
])
.then(([data]) => {
    GROUP_NAME_DYNAMIC = data.group_name;
    document.querySelectorAll(".group-name").forEach(el => el.textContent = data.group_name);
    document.title = data.group_name;
    setTimeout(hideLoading, 500);
})
.catch(err => {
    console.error(err);
    showLoadingError();
});

let GROUP_NAME_DYNAMIC = "GROUP PILOT RFS INDONESIA"; 

fetch("group.json?ts=" + Date.now())
  .then(res => res.json())
  .then(data => {
    GROUP_NAME_DYNAMIC = data.group_name;
    document.querySelectorAll(".group-name")
      .forEach(el => el.textContent = data.group_name);
    document.title = data.group_name;
  })
  .catch(err => {
    console.warn("Gagal load group.json, pakai fallback", err);
  });
    const adminDB = {
    A1: "NjI4ODI4NzIyNDU2Mg==",
    A2: "NjI4NTM2NDMyODU4OQ==",
    A3: "NjI4MzE0MDIyMjcxMQ=="
};

    function toggleTheme() {
        document.body.classList.toggle("light-theme");
        const isLight = document.body.classList.contains("light-theme");
        localStorage.setItem("theme", isLight ? "light" : "dark");
    }

    function toggleMenu() {
        const menu = document.getElementById("navMenu");
        menu.style.display = (menu.style.display === "flex") ? "none" : "flex";
    }

    window.onload = () => {
        if (localStorage.getItem("theme") === "light") {
            document.body.classList.add("light-theme");
        }
        document.querySelectorAll(".year-auto").forEach(el => {
            el.textContent = new Date().getFullYear();
        });
    };

    let slideIndex = 0;
    function showSlides() {
        const slides = document.querySelectorAll(".slides img");
        const slidesContainer = document.querySelector(".slides");
        if(slideIndex >= slides.length) slideIndex = 0;
        if(slideIndex < 0) slideIndex = slides.length - 1;
        slidesContainer.style.transform = `translateX(${-slideIndex * 100}%)`;
    }

    function plusSlides(n) {
        slideIndex += n;
        showSlides();
    }

    setInterval(() => {
        slideIndex++;
        showSlides();
    }, 5000);
    
    function tanyaUser() {
        return new Promise((resolve) => {
            const modal = document.getElementById("customModal");
            modal.style.display = "flex";
            document.body.style.overflow = "hidden";
            
            window.tutupModal = function(jawaban) {
                modal.style.display = "none";
                document.body.style.overflow = "auto";
                resolve(jawaban);
            };
        });
    }

    function kembaliKeForm() {
        document.getElementById("main-content").style.display = "block";
        document.getElementById("step-preview").style.display = "none";
        window.scrollTo(0, 0);
    }

    async function proses() {
        const errorDiv = document.getElementById("formError");
        errorDiv.innerHTML = ""; 

        const nama = document.getElementById("nama").value.trim();
        const wa = document.getElementById("wa").value.trim();
        const umur = document.getElementById("umur").value.trim();
        const alasan = document.getElementById("alasan").value.trim();
        const tiktok = document.getElementById("tiktok").value.trim();
        const vKelas = document.getElementById("kelas").value;
        const vFollower = document.getElementById("follower").value;
        const vProvinsi = document.getElementById("provinsi").value;
        const vKota = document.getElementById("kota").value;
        const vPlanet = document.getElementById("planet").value;
        const vGalaxy = document.getElementById("galaxy").value;
        
        if (!nama || !wa || !umur || !alasan) {
            errorDiv.innerHTML = "‚ùó Lengkapi data wajib (Nama, WA, Umur, Alasan)";
            return;
        }

        let nomor = wa.replace(/\D/g, "");
        if (nomor.startsWith("08")) nomor = "62" + nomor.substring(1);
        if (nomor.length < 10 || nomor.length > 15) {
            errorDiv.innerHTML = "‚ùó Nomor WhatsApp tidak valid";
            return;
        }

        if (tiktok && !/^@[a-zA-Z0-9._]{3,30}$/.test(tiktok)) {
            errorDiv.innerHTML = "‚ùó Akun TikTok tidak valid. Gunakan format @username";
            return;
        }

        if (parseInt(umur) < 5 || parseInt(umur) > 100) {
            errorDiv.innerHTML = "‚ùó Umur harus antara 5 hingga 100 tahun";
            return;
        }

        let waSimpan = localStorage.getItem("rfs_wa");
        if (waSimpan === nomor) {
            const setuju = await tanyaUser(); 
            if (!setuju) return;
        }

        localStorage.setItem("rfs_wa", nomor);

        const idMember = "RFS_I-" + new Date().toISOString().slice(0, 10).replace(/-/g, "") + "-" + Math.floor(100 + Math.random() * 900);
           const GROUP_CLEAN = GROUP_NAME_DYNAMIC.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g, '').trim();

    // 2. Gunakan GROUP_CLEAN di dalam variabel pesan
    const pesan = `PENDAFTARAN ${GROUP_CLEAN}

STATUS    : MENUNGGU PERSETUJUAN ADMIN
ID MEMBER : ${idMember}

NAMA      : ${nama}
WHATSAPP  : ${nomor}
KELAS     : ${vKelas}
UMUR      : ${umur}
TIKTOK    : ${tiktok}
FOLLOWER  : ${vFollower}
PROVINSI  : ${vProvinsi}
KOTA      : ${vKota}
PLANET    : ${vPlanet}
GALAXY    : ${vGalaxy}
ALASAN    : ${alasan}

¬© ${GROUP_CLEAN} - Fly Safe, Fly Smart
- From the official website -`;

                document.getElementById("preview").innerHTML = `
<div class="preview" style="text-align: left;">
    <b style="display: block; text-align: center; font-size: 16px; margin-bottom: 15px;">üìå PREVIEW DATA</b>
    
    <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px dashed #555;">
        <pre style="white-space: pre-wrap; font-family: 'Courier New', Courier, monospace; font-size: 13px; margin: 0; color: #ddd;">${pesan}</pre>
    </div>

    <hr style="border: 0; border-top: 1px solid #444; margin: 20px 0;">

    <div style="display: flex; flex-direction: row; align-items: flex-start; gap: 10px; margin-bottom: 20px; padding: 12px; background: rgba(30,144,255,0.08); border-radius: 8px; border: 1px solid rgba(30,144,255,0.2);">
        <input type="checkbox" id="setujuSyarat" onchange="toggleKirimBtn()" 
               style="min-width: 18px; min-height: 18px; width: 18px; height: 18px; cursor: pointer; margin: 0; margin-top: 3px; accent-color: #1e90ff;"><label for="setujuSyarat" style="cursor: pointer; font-size: 13px; line-height: 1.4; color: inherit; margin: 0;">Saya menyatakan bahwa data di atas sudah benar dan saya setuju mematuhi <b>Syarat & Ketentuan</b> Group PILOT RFS INDONESIA.
        </label>
    </div>

    <div id="captcha-preview" class="captcha-container" style="margin-bottom: 20px;"></div>
    <div id="captchaError" style="color:#ff6b6b; font-size:12px; margin-bottom:10px; text-align:center;"></div>

    <button id="btnKirimAdmin" class="btn" style="opacity: 0.5; cursor: not-allowed; transition: all 0.3s ease; background: #555;" onclick="validasiDanKirim('${encodeURIComponent(pesan)}')">KIRIM DATA KE ADMIN
    </button>
</div>`;

        // Render ulang reCAPTCHA secara manual karena elemennya baru dibuat via innerHTML
        setTimeout(() => {
            grecaptcha.render('captcha-preview', {
                'sitekey': '6LducjIsAAAAANGxKlq05dgfptsMPherCbqQLZGZ',
                'theme': localStorage.getItem("theme") === "light" ? 'light' : 'dark'
            });
        }, 100);

        // SEMBUNYIKAN HALAMAN UTAMA, TAMPILKAN PREVIEW
        document.getElementById("main-content").style.display = "none";
        document.getElementById("step-preview").style.display = "block";
        window.scrollTo(0, 0);
    }
    
    function toggleKirimBtn() {
        const checkbox = document.getElementById("setujuSyarat");
        const btn = document.getElementById("btnKirimAdmin");
        
        if (checkbox && checkbox.checked) {
            btn.disabled = false;
            btn.style.opacity = "1";
            btn.style.cursor = "pointer";
            btn.style.background = "#1e90ff";
        } else if (btn) {
            btn.disabled = true;
            btn.style.opacity = "0.5";
            btn.style.cursor = "not-allowed";
            btn.style.background = "#555";
        }
    }
    function validasiDanKirim(pesanTerencode) {
    const checkbox = document.getElementById("setujuSyarat");
    const captchaResponse = grecaptcha.getResponse();
    const captchaError = document.getElementById("captchaError");

    if (!checkbox || !checkbox.checked) {
        alert("Harap centang persetujuan syarat & ketentuan.");
        return;
    }

    if (captchaResponse.length === 0) {
        captchaError.innerHTML = "‚ùó Silakan centang reCAPTCHA terlebih dahulu.";
        return;
    }

    const lastSubmit = localStorage.getItem("lastSubmitTime");
    const now = Date.now();
    if (lastSubmit && now - lastSubmit < 60000) {
        alert("‚è≥ Tunggu 1 menit sebelum mengirim ulang.");
        return;
    }
    localStorage.setItem("lastSubmitTime", now);
    const keys = Object.keys(adminDB);
    const adminID = keys[Math.floor(Math.random() * keys.length)];
    const adminNumber = decodeAdmin(adminID);
    window.open(
        `https://wa.me/${adminNumber}?text=${pesanTerencode}`,
        "_blank"
    );
}
function decodeAdmin(id) {
    return atob(adminDB[id]);
}
function cekKoneksi() {
    const offlineScreen = document.getElementById("offline-screen");
    if (!offlineScreen) return; 

    const iconElement = offlineScreen.querySelector(".icon");
    const titleElement = offlineScreen.querySelector("h2");
    const textElement = offlineScreen.querySelector("p");
    const retryBtn = offlineScreen.querySelector("button");
    
    if (!navigator.onLine) {
        if (offlineScreen.style.display !== "flex") {
            offlineScreen.classList.remove("hide-offline");
            offlineScreen.style.display = "flex";
            document.body.style.overflow = "hidden";
        }
        
        if (iconElement) iconElement.innerText = "üö´"; 
        if (titleElement) titleElement.innerText = "Koneksi Terputus";
        if (textElement) textElement.innerText = "Silakan periksa koneksi internet Anda untuk melanjutkan pendaftaran.";
        if (retryBtn) retryBtn.style.display = "inline-block";
    } else {

        if (offlineScreen.style.display === "flex" && !offlineScreen.classList.contains("hide-offline")) {
            if (iconElement) iconElement.innerText = "üõú"; 
            if (titleElement) titleElement.innerText = "Koneksi Tersambung!";
            if (textElement) textElement.innerText = "Menyiapkan kembali halaman Anda...";        
            if (retryBtn) retryBtn.style.display = "none"; 
            setTimeout(() => {
                offlineScreen.classList.add("hide-offline");
                setTimeout(() => {
                    offlineScreen.style.display = "none";
                    if (document.getElementById("loading-screen").style.display === "none") {
                        document.body.style.overflow = "auto";
                    }
                }, 500); 
            }, 5000); 
        }
    }
}

setInterval(cekKoneksi, 5000);

window.addEventListener('online', cekKoneksi);
window.addEventListener('offline', cekKoneksi);


cekKoneksi();


function bukaForm() {
    document.getElementById("hero-section").classList.add("hidden");
    const berandaCards = document.querySelectorAll('#keterangan, #aturan');
    berandaCards.forEach(card => card.classList.add("hidden"));
    const formSection = document.getElementById("form-section");
    formSection.classList.remove("hidden");
    const innerCard = formSection.querySelector('.card');
    if (innerCard) {
        innerCard.classList.remove("hidden");
    }
    window.scrollTo(0, 0);
}

function kembaliKeForm() {
    document.getElementById("step-preview").style.display = "none";
    document.getElementById("main-content").style.display = "block";
    bukaForm();
}

</script>‚Äã‚Äã

</body>‚Äã‚Äã
</html>‚Äã‚Äã